<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¸½å­ç­‰çº§æµ‹è¯• - ä½ åˆ°åº•æœ‰å¤šé¸½ï¼Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            position: relative;
        }

        /* é£ç¿”çš„é¸½å­èƒŒæ™¯ */
        .flying-pigeon {
            position: fixed;
            font-size: 30px;
            animation: fly 15s linear infinite;
            z-index: 1;
            opacity: 0.3;
        }

        @keyframes fly {
            from {
                left: -50px;
                transform: translateY(0px);
            }
            25% {
                transform: translateY(-30px);
            }
            50% {
                transform: translateY(30px);
            }
            75% {
                transform: translateY(-20px);
            }
            to {
                left: 100%;
                transform: translateY(0px);
            }
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 10;
            /* animation: shake 0.5s ease-in-out infinite alternate; */
        }

        @keyframes shake {
            from { transform: translateX(-2px); }
            to { transform: translateX(2px); }
        }

        .container:hover {
            animation: shake 0.1s ease-in-out infinite alternate;
            border: 3px dashed #ff6b6b;
        }

        h1 {
            text-align: center;
            color: #e74c3c;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-style: italic;
        }

        .start-screen, .question-screen, .result-screen {
            display: none;
        }

        .start-screen.active, .question-screen.active, .result-screen.active {
            display: block;
        }

        .start-btn {
            display: block;
            margin: 30px auto;
            padding: 15px 40px;
            font-size: 1.2em;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(238, 90, 36, 0.4);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(238, 90, 36, 0.6);
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f39c12, #e74c3c);
            border-radius: 5px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .question {
            font-size: 1.3em;
            color: #2c3e50;
            margin-bottom: 30px;
            line-height: 1.6;
            padding: 20px;
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border-radius: 15px;
            border-left: 5px solid #e74c3c;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            padding: 15px 20px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            background: #ffeaa7;
            border-color: #e74c3c;
            transform: translateX(10px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .option::before {
            content: 'ğŸ•Šï¸';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .option:hover::before {
            opacity: 1;
        }

        .result-title {
            text-align: center;
            font-size: 2em;
            margin-bottom: 20px;
        }

        .pigeon-level {
            text-align: center;
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .level-1 { color: #27ae60; }
        .level-2 { color: #f39c12; }
        .level-3 { color: #e67e22; }
        .level-4 { color: #e74c3c; }
        .level-5 { color: #8e44ad; }

        .insult {
            text-align: center;
            font-size: 1.2em;
            color: #2c3e50;
            margin: 20px 0;
            padding: 20px;
            background: #ffeaa7;
            border-radius: 15px;
            line-height: 1.6;
        }

        .history-btn, .restart-btn {
            display: inline-block;
            margin: 10px;
            padding: 12px 30px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .restart-btn {
            background: #e74c3c;
        }

        .history-btn:hover, .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .history-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .history-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 70vh;
            overflow-y: auto;
        }

        .history-item {
            padding: 15px;
            margin: 10px 0;
            background: #ecf0f1;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .close-modal {
            float: right;
            font-size: 1.5em;
            cursor: pointer;
            color: #e74c3c;
        }

        /* æ‰è½åŠ¨ç”» */
        .falling-item {
            position: fixed;
            font-size: 30px;
            z-index: 100;
            animation: fall 3s ease-in forwards;
        }

        @keyframes fall {
            from {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .stats {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #ecf0f1;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <!-- é£ç¿”çš„é¸½å­èƒŒæ™¯ -->
    <div class="flying-pigeon" style="top: 10%;">ğŸ•Šï¸</div>
    <div class="flying-pigeon" style="top: 30%; animation-delay: 3s;">ğŸ•Šï¸</div>
    <div class="flying-pigeon" style="top: 50%; animation-delay: 6s;">ğŸ•Šï¸</div>
    <div class="flying-pigeon" style="top: 70%; animation-delay: 9s;">ğŸ•Šï¸</div>
    <div class="flying-pigeon" style="top: 85%; animation-delay: 12s;">ğŸ•Šï¸</div>

    <div class="container">
        <h1>ğŸ•Šï¸ é¸½å­ç­‰çº§æµ‹è¯• ğŸ•Šï¸</h1>
        <p class="subtitle">çœ‹çœ‹ä½ åˆ°åº•æœ‰å¤šèƒ½é¸½ï¼</p>

        <!-- å¼€å§‹ç•Œé¢ -->
        <div class="start-screen active">
            <div style="text-align: center; margin: 30px 0;">
                <p style="font-size: 1.1em; color: #666; line-height: 1.8;">
                    å…„å¼Ÿå±€ã€å¥³æœ‹å‹çº¦ä¼šã€å®¶äººèšä¼š...<br>
                    ä½ æ€»æ˜¯æœ‰å„ç§ç†ç”±æ”¾é¸½å­å—ï¼Ÿ<br>
                    æ¥æµ‹è¯•ä¸€ä¸‹ä½ çš„é¸½å­ç­‰çº§å§ï¼<br>
                    <strong>è­¦å‘Šï¼šç»“æœå¯èƒ½ä¼šè®©ä½ æ— åœ°è‡ªå®¹ï¼</strong> ğŸ¤£
                </p>
            </div>
            <button class="start-btn" onclick="startTest()">å¼€å§‹æµ‹è¯•</button>
            
            <div class="stats" id="startStats">
                <p>å†å²æµ‹è¯•æ¬¡æ•°ï¼š<span id="totalTests">0</span></p>
                <p>å¹³å‡é¸½å­ç­‰çº§ï¼š<span id="avgLevel">-</span></p>
            </div>
        </div>

        <!-- é—®é¢˜ç•Œé¢ -->
        <div class="question-screen">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="question" id="questionText"></div>
            <div class="options" id="optionsContainer"></div>
        </div>

        <!-- ç»“æœç•Œé¢ -->
        <div class="result-screen">
            <div class="result-title">æµ‹è¯•å®Œæˆï¼</div>
            <div class="pigeon-level" id="pigeonLevel"></div>
            <div class="insult" id="insultText"></div>
            <div style="text-align: center;">
                <button class="history-btn" onclick="showHistory()">æŸ¥çœ‹å†å²</button>
                <button class="restart-btn" onclick="restartTest()">å†æµ‹ä¸€æ¬¡</button>
            </div>
        </div>
    </div>

    <!-- å†å²è®°å½•æ¨¡æ€æ¡† -->
    <div class="history-modal" id="historyModal">
        <div class="history-content">
            <span class="close-modal" onclick="closeHistory()">&times;</span>
            <h2 style="text-align: center; margin-bottom: 20px;">ğŸ•Šï¸ é¸½å­å†å²è®°å½• ğŸ•Šï¸</h2>
            <div id="historyList"></div>
        </div>
    </div>

    <script>
        // é¢˜ç›®æ•°æ®
        const questions = [
            {
                question: "å…„å¼Ÿçº¦å¥½å‘¨æœ«å¼€é»‘æ‰“æ¸¸æˆï¼Œä½ ...",
                options: [
                    { text: "å‡†æ—¶ä¸Šçº¿ï¼Œè¿˜å¸¦é›¶é£Ÿ", score: 0 },
                    { text: "è¿Ÿåˆ°10åˆ†é’Ÿï¼Œè¯´åˆšåƒå®Œé¥­", score: 1 },
                    { text: "æ¨è¿Ÿ1å°æ—¶ï¼Œè¯´ä¸´æ—¶æœ‰äº‹", score: 2 },
                    { text: "ä¸´æ—¶è¯´å®¶é‡Œæ¥å®¢äººäº†", score: 3 },
                    { text: "ç›´æ¥æ¶ˆå¤±ï¼Œç¬¬äºŒå¤©æ‰å›æ¶ˆæ¯", score: 4 }
                ]
            },
            {
                question: "å¥³æœ‹å‹çº¦ä½ çœ‹ç”µå½±ï¼Œä½ ...",
                options: [
                    { text: "æå‰åˆ°å½±é™¢ä¹°å¥½çˆ†ç±³èŠ±", score: 0 },
                    { text: "è¿Ÿåˆ°15åˆ†é’Ÿï¼Œè·¯ä¸Šå µè½¦", score: 1 },
                    { text: "è¯´å·¥ä½œå¿™ï¼Œæ”¹å¤©å§", score: 2 },
                    { text: "ä¸´å‡ºå‘è¯´æœ‹å‹æ€¥äº‹æ‰¾", score: 3 },
                    { text: "ç›´æ¥å…³æœºï¼Œè¯´æ‰‹æœºæ²¡ç”µ", score: 4 }
                ]
            },
            {
                question: "å®¶åº­èšé¤ï¼Œçˆ¸å¦ˆè®©ä½ å›å®¶åƒé¥­ï¼Œä½ ...",
                options: [
                    { text: "æå‰å›å®¶å¸®å¦ˆå¦ˆåšé¥­", score: 0 },
                    { text: "æ™šåˆ°åŠå°æ—¶ï¼Œè¯´åŠ ç­", score: 1 },
                    { text: "è¯´å…¬å¸èšé¤ï¼Œå›ä¸å»", score: 2 },
                    { text: "è¯´èº«ä½“ä¸èˆ’æœè¦ä¼‘æ¯", score: 3 },
                    { text: "ä¸æ¥ç”µè¯ï¼Œç›´æ¥ç©å¤±è¸ª", score: 4 }
                ]
            },
            {
                question: "æœ‹å‹ç”Ÿæ—¥èšä¼šï¼Œä½ ...",
                options: [
                    { text: "å¸¦ç¤¼ç‰©å‡†æ—¶åˆ°åœº", score: 0 },
                    { text: "è¿Ÿåˆ°20åˆ†é’Ÿï¼Œè·¯ä¸Šå µè½¦", score: 1 },
                    { text: "è¯´ä¸´æ—¶æœ‰å·¥ä½œè¦å¤„ç†", score: 2 },
                    { text: "è¯´å®¶é‡Œæœ‰æ€¥äº‹å»ä¸äº†", score: 3 },
                    { text: "æœ‹å‹åœˆçœ‹åˆ°ä½ åœ¨åˆ«å¤„ç©", score: 4 }
                ]
            },
            {
                question: "çº¦å¥½å»å¥èº«æˆ¿ï¼Œä½ ...",
                options: [
                    { text: "æå‰åˆ°å¥èº«æˆ¿çƒ­èº«", score: 0 },
                    { text: "æ™šåˆ°15åˆ†é’Ÿï¼Œè·¯ä¸Šå µè½¦", score: 1 },
                    { text: "è¯´ä»Šå¤©å¤ªç´¯äº†ï¼Œæ˜å¤©å†å»", score: 2 },
                    { text: "è¯´è‚Œè‚‰é…¸ç—›éœ€è¦ä¼‘æ¯", score: 3 },
                    { text: "ç›´æ¥åœ¨å®¶èººå¹³ï¼Œä¸å›æ¶ˆæ¯", score: 4 }
                ]
            },
            {
                question: "åŒäº‹çº¦ä½ å‘¨æœ«çˆ¬å±±ï¼Œä½ ...",
                options: [
                    { text: "å‡†å¤‡è£…å¤‡ï¼Œå‡†æ—¶é›†åˆ", score: 0 },
                    { text: "è¿Ÿåˆ°åŠå°æ—¶ï¼Œè¯´èµ·æ™šäº†", score: 1 },
                    { text: "è¯´å¤©æ°”ä¸å¥½ï¼Œä¸‹æ¬¡å§", score: 2 },
                    { text: "è¯´è†ç›–ä¸èˆ’æœä¸èƒ½çˆ¬", score: 3 },
                    { text: "ä¸æ¥ç”µè¯ï¼Œå‡è£…æ²¡çœ‹åˆ°", score: 4 }
                ]
            },
            {
                question: "ç­”åº”å¸®æœ‹å‹æ¬å®¶ï¼Œä½ ...",
                options: [
                    { text: "æå‰åˆ°å¸®ç€æ‰“åŒ…", score: 0 },
                    { text: "æ™šåˆ°20åˆ†é’Ÿï¼Œè¯´å µè½¦", score: 1 },
                    { text: "è¯´ä¸´æ—¶åŠ ç­å»ä¸äº†", score: 2 },
                    { text: "è¯´è…°æ‰­ä¼¤äº†ä¸èƒ½æ¬é‡ç‰©", score: 3 },
                    { text: "å…³æœºä¸€å¤©ï¼Œè¯´æ‰‹æœºåäº†", score: 4 }
                ]
            },
            {
                question: "ç½‘å‹çº¦è§é¢åƒé¥­ï¼Œä½ ...",
                options: [
                    { text: "æå‰åˆ°é¤å…ç­‰å¯¹æ–¹", score: 0 },
                    { text: "è¿Ÿåˆ°10åˆ†é’Ÿï¼Œæ‰¾åœè½¦ä½", score: 1 },
                    { text: "è¯´ä¸´æ—¶æœ‰äº‹æ”¹æ—¶é—´", score: 2 },
                    { text: "è¯´èº«ä½“ä¸é€‚ä¸æƒ³å‡ºé—¨", score: 3 },
                    { text: "ç›´æ¥æ‹‰é»‘ï¼Œäººé—´è’¸å‘", score: 4 }
                ]
            },
            {
                question: "çº¦å¥½å»å›¾ä¹¦é¦†å­¦ä¹ ï¼Œä½ ...",
                options: [
                    { text: "æå‰å å¥½åº§ä½", score: 0 },
                    { text: "æ™šåˆ°15åˆ†é’Ÿï¼Œè·¯ä¸Šå µè½¦", score: 1 },
                    { text: "è¯´ä»Šå¤©çŠ¶æ€ä¸å¥½ä¸æƒ³å­¦", score: 2 },
                    { text: "è¯´å¤´ç–¼éœ€è¦åœ¨å®¶ä¼‘æ¯", score: 3 },
                    { text: "åœ¨å®¶æ‰“æ¸¸æˆï¼Œå‡è£…å­¦ä¹ ", score: 4 }
                ]
            },
            {
                question: "æœ‹å‹è¯·ä½ åƒé¥­ï¼Œä½ ...",
                options: [
                    { text: "å‡†æ—¶åˆ°è¿˜å¸¦å°ç¤¼ç‰©", score: 0 },
                    { text: "è¿Ÿåˆ°20åˆ†é’Ÿï¼Œè¯´å µè½¦", score: 1 },
                    { text: "è¯´ä¸´æ—¶æœ‰ä¼šè®®è¦å¼€", score: 2 },
                    { text: "è¯´è‚ èƒƒä¸é€‚ä¸èƒ½å‡ºé—¨", score: 3 },
                    { text: "ä¸å›æ¶ˆæ¯ï¼Œæœ‹å‹åœˆæ™’ç¾é£Ÿ", score: 4 }
                ]
            },
            {
                question: "çº¦å¥½ä¸€èµ·çœ‹çƒèµ›ï¼Œä½ ...",
                options: [
                    { text: "å¸¦å•¤é…’é›¶é£Ÿå‡†æ—¶åˆ°", score: 0 },
                    { text: "è¿Ÿåˆ°15åˆ†é’Ÿï¼Œè¯´å µè½¦", score: 1 },
                    { text: "è¯´ä¸´æ—¶åŠ ç­çœ‹ä¸äº†", score: 2 },
                    { text: "è¯´ç”µè§†åäº†åœ¨å®¶çœ‹ä¸äº†", score: 3 },
                    { text: "ç›´æ¥ç¡è§‰ï¼Œä¸æ¥ç”µè¯", score: 4 }
                ]
            },
            {
                question: "ç­”åº”é™ªæœ‹å‹é€›è¡—ï¼Œä½ ...",
                options: [
                    { text: "æå‰åˆ°å•†åœºç­‰æœ‹å‹", score: 0 },
                    { text: "è¿Ÿåˆ°20åˆ†é’Ÿï¼Œè¯´å µè½¦", score: 1 },
                    { text: "è¯´çªç„¶æ¥äº†å·¥ä½œ", score: 2 },
                    { text: "è¯´è„šç–¼èµ°ä¸äº†è·¯", score: 3 },
                    { text: "åœ¨å®¶èººå¹³ï¼Œä¸å›æ¶ˆæ¯", score: 4 }
                ]
            },
            {
                question: "çº¦å¥½å»KTVå”±æ­Œï¼Œä½ ...",
                options: [
                    { text: "æå‰åˆ°è®¢å¥½åŒ…å¢", score: 0 },
                    { text: "è¿Ÿåˆ°15åˆ†é’Ÿï¼Œè¯´å µè½¦", score: 1 },
                    { text: "è¯´å—“å­ä¸èˆ’æœä¸æƒ³å”±", score: 2 },
                    { text: "è¯´æ„Ÿå†’äº†ä¸èƒ½å‡ºé—¨", score: 3 },
                    { text: "åœ¨å®¶çœ‹å‰§ï¼Œå‡è£…ç”Ÿç—…", score: 4 }
                ]
            },
            {
                question: "æœ‹å‹çº¦ä½ é’“é±¼ï¼Œä½ ...",
                options: [
                    { text: "å‡†å¤‡æ¸”å…·å‡†æ—¶åˆ°", score: 0 },
                    { text: "è¿Ÿåˆ°30åˆ†é’Ÿï¼Œè¯´å µè½¦", score: 1 },
                    { text: "è¯´å¤©æ°”ä¸å¥½ä¸æƒ³å»", score: 2 },
                    { text: "è¯´å¯¹é±¼è¿‡æ•ä¸èƒ½å»", score: 3 },
                    { text: "åœ¨å®¶ç¡è§‰ï¼Œä¸æ¥ç”µè¯", score: 4 }
                ]
            },
            {
                question: "çº¦å¥½å»æ—…æ¸¸ï¼Œä½ ...",
                options: [
                    { text: "æå‰å‡†å¤‡è¡Œæç­‰å‡ºå‘", score: 0 },
                    { text: "è¿Ÿåˆ°1å°æ—¶ï¼Œè¯´æ”¶æ‹¾è¡Œæ", score: 1 },
                    { text: "è¯´ä¸´æ—¶å·¥ä½œèµ°ä¸å¼€", score: 2 },
                    { text: "è¯´çªç„¶æœ‰äº‹å»ä¸äº†", score: 3 },
                    { text: "ç›´æ¥æ¶ˆå¤±ï¼Œæœºç¥¨æµªè´¹", score: 4 }
                ]
            },
            {
                question: "ç­”åº”å¸®æœ‹å‹ä¿®ç”µè„‘ï¼Œä½ ...",
                options: [
                    { text: "å¸¦å·¥å…·å‡†æ—¶ä¸Šé—¨", score: 0 },
                    { text: "è¿Ÿåˆ°30åˆ†é’Ÿï¼Œè¯´å µè½¦", score: 1 },
                    { text: "è¯´ä»Šå¤©å¤ªç´¯æ˜å¤©å†å»", score: 2 },
                    { text: "è¯´å·¥å…·åäº†ä¿®ä¸äº†", score: 3 },
                    { text: "ä¸æ¥ç”µè¯ï¼Œå‡è£…æ²¡ç©º", score: 4 }
                ]
            },
            {
                question: "çº¦å¥½ä¸€èµ·åšé¡¹ç›®ï¼Œä½ ...",
                options: [
                    { text: "æå‰åˆ°å‡†å¤‡ææ–™", score: 0 },
                    { text: "è¿Ÿåˆ°20åˆ†é’Ÿï¼Œè¯´å µè½¦", score: 1 },
                    { text: "è¯´æœ‰å…¶ä»–å·¥ä½œè¦å¤„ç†", score: 2 },
                    { text: "è¯´æ€è·¯å¡ä½éœ€è¦ä¼‘æ¯", score: 3 },
                    { text: "åœ¨å®¶æ‰“æ¸¸æˆï¼Œå‡è£…æ€è€ƒ", score: 4 }
                ]
            },
            {
                question: "æœ‹å‹çº¦ä½ å–é…’ï¼Œä½ ...",
                options: [
                    { text: "å‡†æ—¶åˆ°è¿˜å¸¦ä¸‹é…’èœ", score: 0 },
                    { text: "è¿Ÿåˆ°15åˆ†é’Ÿï¼Œè¯´å µè½¦", score: 1 },
                    { text: "è¯´æ˜å¤©è¦ä¸Šç­ä¸èƒ½å–", score: 2 },
                    { text: "è¯´é…’ç²¾è¿‡æ•ä¸èƒ½å–", score: 3 },
                    { text: "åœ¨å®¶å–èŒ¶ï¼Œå‡è£…å…»ç”Ÿ", score: 4 }
                ]
            },
            {
                question: "çº¦å¥½å»å¬éŸ³ä¹ä¼šï¼Œä½ ...",
                options: [
                    { text: "æå‰åˆ°å å¥½ä½ç½®", score: 0 },
                    { text: "è¿Ÿåˆ°20åˆ†é’Ÿï¼Œè¯´å µè½¦", score: 1 },
                    { text: "è¯´çªç„¶æœ‰äº‹å»ä¸äº†", score: 2 },
                    { text: "è¯´è€³æœµä¸èˆ’æœä¸èƒ½å¬", score: 3 },
                    { text: "åœ¨å®¶å¬æ­Œï¼Œå‡è£…å»äº†", score: 4 }
                ]
            },
            {
                question: "ç­”åº”é™ªæœ‹å‹çœ‹ç—…ï¼Œä½ ...",
                options: [
                    { text: "æå‰åˆ°åŒ»é™¢æŒ‚å·", score: 0 },
                    { text: "è¿Ÿåˆ°30åˆ†é’Ÿï¼Œè¯´å µè½¦", score: 1 },
                    { text: "è¯´å·¥ä½œå¿™å»ä¸äº†", score: 2 },
                    { text: "è¯´è‡ªå·±ä¹Ÿç”Ÿç—…äº†", score: 3 },
                    { text: "åœ¨å®¶ä¼‘æ¯ï¼Œä¸æ¥ç”µè¯", score: 4 }
                ]
            }
        ];

        // ç¾è¾±è¯„ä»·
        const insults = {
            1: {
                title: "ğŸ¦ èœé¸Ÿçº§é¸½å­",
                text: "æ­å–œä½ ï¼ä½ åŸºæœ¬è¿˜ç®—ä¸ªäººï¼è™½ç„¶å¶å°”ä¹Ÿä¼šæ”¾é¸½å­ï¼Œä½†è‡³å°‘è¿˜æœ‰ç‚¹è‰¯å¿ƒã€‚æœ‹å‹ä»¬è¿˜èƒ½å‹‰å¼ºå¿å—ä½ ï¼Œç»§ç»­åŠ æ²¹ï¼ğŸ‘",
                emoji: "ğŸŒŸ"
            },
            2: {
                title: "ğŸ•Šï¸ æ™®é€šçº§é¸½å­",
                text: "å—¯...ä½ å·²ç»æŒæ¡äº†é¸½å­çš„åŸºæœ¬æŠ€èƒ½ï¼è¿Ÿåˆ°ã€æ‰¾å€Ÿå£è¿™äº›æ“ä½œå·²ç»å¾ˆç†Ÿç»ƒäº†ã€‚æœ‹å‹ä»¬å¼€å§‹æ€€ç–‘ä½ çš„äººå“ï¼Œä½†è¿˜æŠ±æœ‰ä¸€ä¸å¸Œæœ›ã€‚ğŸ˜…",
                emoji: "ğŸ¤”"
            },
            3: {
                title: "ğŸ¦… ç†Ÿç»ƒçº§é¸½å­",
                text: "å“‡ï¼ä½ å·²ç»æ˜¯ä¸ªåˆæ ¼çš„é¸½å­äº†ï¼å„ç§å€Ÿå£ä¿¡æ‰‹æ‹ˆæ¥ï¼Œæ”¾é¸½å­å¦‚å‘¼å¸èˆ¬è‡ªç„¶ã€‚æœ‹å‹ä»¬å·²ç»ä¸æŒ‡æœ›ä½ äº†ï¼Œçº¦ä½ åªæ˜¯èµ°ä¸ªå½¢å¼ã€‚ğŸ¤·â€â™‚ï¸",
                emoji: "ğŸ­"
            },
            4: {
                title: "ğŸ¦† å¤§å¸ˆçº§é¸½å­",
                text: "å‰å®³äº†ï¼ä½ å°±æ˜¯é¸½å­ç•Œçš„æˆ˜æ–—æœºï¼ğŸ¥š ä½ çš„å­˜åœ¨è®©'è¯šä¿¡'è¿™ä¸ªè¯å˜å¾—è‹ç™½æ— åŠ›ã€‚æœ‹å‹ä»¬çº¦ä½ ä¹‹å‰éƒ½ä¼šå…ˆç®—ä¸€å¦ï¼Œçœ‹çœ‹ä»Šå¤©æ˜¯ä¸æ˜¯ä¸å®œè§ä½ ã€‚ğŸ¥šğŸ…",
                emoji: "ğŸ’©"
            },
            5: {
                title: "ğŸ¦¤ ä¼ è¯´çº§é¸½ç‹",
                text: "æˆ‘çš„å¤©ï¼ä½ å·²ç»è¶…è¶Šäº†é¸½å­çš„å¢ƒç•Œï¼ä½ å°±æ˜¯é¸½ç¥ï¼ğŸ¥šğŸ…ğŸ’© ä½ çš„æœ‹å‹ä»¬å¯èƒ½å·²ç»å¿˜äº†ä½ é•¿ä»€ä¹ˆæ ·äº†ã€‚å»ºè®®ä½ æ”¹åå«'æ°¸è¿œåœ¨è·¯ä¸Š'ï¼Œå› ä¸ºæ°¸è¿œåœ¨è·¯ä¸Šï¼Œä½†æ°¸è¿œåˆ°ä¸äº†ï¼",
                emoji: "â˜ ï¸"
            }
        };

        let currentQuestion = 0;
        let totalScore = 0;
        let testHistory = [];

        // åˆå§‹åŒ–
        function init() {
            loadHistory();
            updateStartStats();
        }

        // åŠ è½½å†å²è®°å½•
        function loadHistory() {
            const saved = localStorage.getItem('pigeonTestHistory');
            if (saved) {
                testHistory = JSON.parse(saved);
            }
        }

        // ä¿å­˜å†å²è®°å½•
        function saveHistory() {
            localStorage.setItem('pigeonTestHistory', JSON.stringify(testHistory));
        }

        // æ›´æ–°å¼€å§‹ç•Œé¢ç»Ÿè®¡
        function updateStartStats() {
            const totalTests = testHistory.length;
            const avgLevel = totalTests > 0 
                ? (testHistory.reduce((sum, item) => sum + item.level, 0) / totalTests).toFixed(1)
                : '-';
            
            document.getElementById('totalTests').textContent = totalTests;
            document.getElementById('avgLevel').textContent = avgLevel;
        }

        // å¼€å§‹æµ‹è¯•
        function startTest() {
            currentQuestion = 0;
            totalScore = 0;
            document.querySelector('.start-screen').classList.remove('active');
            document.querySelector('.question-screen').classList.add('active');
            showQuestion();
        }

        // æ˜¾ç¤ºé—®é¢˜
        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionText').textContent = `${currentQuestion + 1}. ${question.question}`;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.textContent = option.text;
                optionDiv.onclick = () => selectOption(option.score);
                optionsContainer.appendChild(optionDiv);
            });
            
            // æ›´æ–°è¿›åº¦æ¡
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // é€‰æ‹©é€‰é¡¹
        function selectOption(score) {
            totalScore += score;
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult() {
            document.querySelector('.question-screen').classList.remove('active');
            document.querySelector('.result-screen').classList.add('active');
            
            // è®¡ç®—ç­‰çº§
            let level;
            if (totalScore <= 20) level = 1;
            else if (totalScore <= 40) level = 2;
            else if (totalScore <= 60) level = 3;
            else if (totalScore <= 80) level = 4;
            else level = 5;
            
            const insult = insults[level];
            const levelDiv = document.getElementById('pigeonLevel');
            levelDiv.textContent = insult.title;
            levelDiv.className = `pigeon-level level-${level}`;
            
            document.getElementById('insultText').innerHTML = `
                ${insult.emoji} ${insult.text} ${insult.emoji}
                <br><br>
                <strong>ä½ çš„å¾—åˆ†ï¼š${totalScore} / 80</strong>
            `;
            
            // è§¦å‘æ‰è½åŠ¨ç”»
            if (level >= 3) {
                triggerFallingAnimation(level);
            }
            
            // ä¿å­˜åˆ°å†å²
            const result = {
                date: new Date().toLocaleString('zh-CN'),
                score: totalScore,
                level: level,
                title: insult.title
            };
            testHistory.unshift(result);
            if (testHistory.length > 10) {
                testHistory = testHistory.slice(0, 10);
            }
            saveHistory();
        }

        // è§¦å‘æ‰è½åŠ¨ç”»
        function triggerFallingAnimation(level) {
            const items = level === 3 ? ['ğŸ¥š'] : level === 4 ? ['ğŸ¥š', 'ğŸ…'] : ['ğŸ¥š', 'ğŸ…', 'ğŸ’©'];
            const count = level * 3;
            
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const item = document.createElement('div');
                    item.className = 'falling-item';
                    item.textContent = items[Math.floor(Math.random() * items.length)];
                    item.style.left = Math.random() * 100 + '%';
                    item.style.animationDelay = Math.random() * 0.5 + 's';
                    document.body.appendChild(item);
                    
                    setTimeout(() => item.remove(), 3000);
                }, i * 200);
            }
        }

        // æ˜¾ç¤ºå†å²è®°å½•
        function showHistory() {
            const modal = document.getElementById('historyModal');
            const historyList = document.getElementById('historyList');
            
            if (testHistory.length === 0) {
                historyList.innerHTML = '<p style="text-align: center; color: #666;">æš‚æ— æµ‹è¯•è®°å½•</p>';
            } else {
                historyList.innerHTML = testHistory.map((item, index) => `
                    <div class="history-item">
                        <strong>${item.date}</strong><br>
                        ${item.title} - å¾—åˆ†ï¼š${item.score}
                    </div>
                `).join('');
            }
            
            modal.style.display = 'flex';
        }

        // å…³é—­å†å²è®°å½•
        function closeHistory() {
            document.getElementById('historyModal').style.display = 'none';
        }

        // é‡æ–°æµ‹è¯•
        function restartTest() {
            document.querySelector('.result-screen').classList.remove('active');
            document.querySelector('.start-screen').classList.add('active');
            updateStartStats();
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.onload = init;
    </script>
</body>
</html>
